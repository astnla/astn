<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineMotion - Video Portfolio</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link
        href="https://fonts.googleapis.com/css2?family=Geist:wght@200;300;400;500;600&amp;family=Inter:wght@200;300;400;500&amp;display=swap"
        rel="stylesheet">

    <!-- Scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Geist', 'Inter', 'sans-serif'],
                        mono: ['Geist Mono', 'monospace'],
                    },
                    colors: {
                        neutral: {
                            850: '#1f1f1f',
                            900: '#171717',
                            950: '#0a0a0a',
                        }
                    },
                    animation: {
                        'spin-slow': 'spin 8s linear infinite',
                    }
                }
            }
        }
    </script>

    <style>
        /* Base Setup */
        :root {
            --bg-deep: #050505;
        }

        body {
            background-color: var(--bg-deep);
            color: #e5e5e5;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #09090b;
        }

        ::-webkit-scrollbar-thumb {
            background: #27272a;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #3f3f46;
        }

        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Animations */
        @keyframes animationIn {
            0% {
                opacity: 0;
                transform: translateY(20px);
                filter: blur(8px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
                filter: blur(0px);
            }
        }

        .animate-on-scroll {
            opacity: 0;
        }

        .animate-on-scroll.animate {
            animation: animationIn 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        .delay-100 {
            animation-delay: 0.1s;
        }

        .delay-200 {
            animation-delay: 0.2s;
        }

        .delay-300 {
            animation-delay: 0.3s;
        }

        /* Stage Container Transitions */
        #stage-container {
            transition: all 0.8s cubic-bezier(0.19, 1, 0.22, 1);
            position: relative;
        }

        /* Initial State: Large 4:3 */
        #stage-container:not(.expanded) {
            width: 35vw;
            /* Much wider on mobile */
            height: 43vw;
            /* ‚Üê Let aspect-ratio handle height */
            max-width: none;
            aspect-ratio: 4/3;
            cursor: pointer;
        }

        /* Expanded State: 16:9 Wide Cinematic */
        #stage-container.expanded {
            width: auto;
            height: 45vw;
            aspect-ratio: 16/9;
            z-index: 50;
            border-radius: 0.5rem;
        }

        @media (max-width: 1266px) {
            #stage-container:not(.expanded) {
                width: 90vw;
                /* Much wider on mobile */
                height: auto;
                /* ‚Üê Let aspect-ratio handle height */
                max-width: none;
                aspect-ratio: 4/3;
                cursor: pointer;
            }

            #stage-container.expanded {
                width: 90vw;
                height: auto;
                aspect-ratio: 16/9;
                z-index: 50;
                border-radius: 0.5rem;
                /* Keep rounded corners if desired, or set to 0 */
            }
        }

        /* Hide text when expanded */
        .video-mode .hide-on-expand {
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
            transition: all 0.5s ease;
        }

        /* Show close button when expanded */
        #close-video-btn {
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .video-mode #close-video-btn {
            opacity: 1;
            pointer-events: auto;
            transition-delay: 0.3s;
        }

        /* Grid Scroll */
        .grid-scroll::-webkit-scrollbar {
            width: 0px;
        }

        .filter-tab.active {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        .grid-fade-out {
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .grid-fade-in {
            opacity: 1;
            transform: translateY(0px);
            transition: opacity 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        #filter-wrapper {
            position: relative;
        }

        #filter-indicator {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 9999px;
            z-index: 0;
            pointer-events: none;
            transition: all 0.35s cubic-bezier(0.16, 1, 0.3, 1);
        }

        /* ensure buttons are above the sliding pill */
        .filter-tab {
            position: relative;
            z-index: 2;
        }

        /* MOBILE: Remove full-height slide 1 */
        @media (max-width: 1266px) {

            /* Slide 1 becomes auto-height instead of full screen */
            #slide-1 {
                height: auto !important;
                min-height: unset !important;
                padding-top: 120px; /* below header */
                padding-bottom: 24px;
            }

            /* Slide 2 starts immediately below */
            #slide-2 {
                margin-top: 0;
                position: relative;
            }

            /* Dim Slide 2 until user scrolls */
            #slide-2::before {
                content: "";
                position: absolute;
                inset: 0;
                background: linear-gradient(
                    to bottom,
                    rgba(0,0,0,0) 0px,
                    rgba(0,0,0,0.6) 48px,
                    rgba(0,0,0,0.6) 100%
                );
                backdrop-filter: blur(4px);
                transition: opacity 0.3s ease;
                z-index: 50;
                pointer-events: none;
            }


            /* Disable interaction on slide 2 until active */
            #slide-2.disabled {
                pointer-events: none;
            }

            /* Enable interaction when activated */
            #slide-2.enabled::before {
                opacity: 0;
                backdrop-filter: none;
                pointer-events: none;
            }
        }

    </style>
</head>

<body class="relative bg-neutral-950 overflow-hidden h-screen w-screen text-neutral-200">

    <!-- Header -->
    <header
        class="fixed top-0 left-0 right-0 z-[70] px-6 py-5 flex justify-between items-center pointer-events-none mix-blend-difference text-white">
        <div class="pointer-events-auto flex items-center gap-2">
            <div class="w-2 h-2 rounded-full bg-white animate-pulse transition-colors duration-300" id="rec-dot"></div>
            <span class="text-xs font-medium tracking-widest uppercase opacity-80 font-mono"
                id="status-text">astn</span>
        </div>

        <div class="pointer-events-auto flex items-center gap-4">
            <span class="text-xs font-mono opacity-60 hidden md:block">01:07:19:27</span>
            <button
                class="bg-white/10 hover:bg-white/20 backdrop-blur-md px-3 py-1.5 rounded text-xs font-medium transition-colors border border-white/10">
                Menu
            </button>
        </div>
    </header>

    <!-- Close Video Button -->
    <div id="close-video-btn" class="fixed top-24 right-8 z-[80]">
        <button onclick="closeVideo(event)"
            class="bg-black/50 hover:bg-black/80 backdrop-blur border border-white/10 text-white rounded-full w-12 h-12 flex items-center justify-center transition-all hover:scale-105 group">
            <i data-lucide="x" class="w-5 h-5 group-hover:rotate-90 transition-transform duration-300"></i>
        </button>
    </div>

    <!-- Navigation Dots -->
    <div class="fixed right-6 top-1/2 -translate-y-1/2 z-[60] hidden md:flex flex-col gap-4" id="nav-dots">
        <a href="#slide-1" class="nav-dot w-1.5 h-1.5 rounded-full bg-white transition-all duration-300 scale-125"
            aria-label="Player"></a>
        <a href="#slide-2"
            class="nav-dot w-1.5 h-1.5 rounded-full bg-white/20 hover:bg-white transition-all duration-300"
            aria-label="Archive"></a>
    </div>

    <!-- Main Scroll Container -->
    <main id="main-scroll" class="overflow-y-scroll snap-y snap-mandatory scroll-smooth w-full h-full relative"
        onscroll="handleScroll()">

        <!-- Slide 1: The Stage -->
        <section id="slide-1"
            class="snap-start shrink-0 w-full h-screen relative flex items-center justify-center overflow-hidden"
            data-index="0">

            <!-- Background Elements -->


            <!-- Central Container (Clickable) -->
            <div id="stage-container" onclick="expandPlayer()"
                class="relative bg-neutral-900 overflow-hidden rounded-lg shadow-2xl group hover:border-white/10 transition-colors">

                <!-- Video/Image Layer -->
                <div class="absolute inset-0">

                    <!-- Thumbnail -->
                    <img id="main-thumbnail" src="https://astnla.com/films/images/thumb/field25.webp"
                        class="w-full h-full object-cover opacity-80 transition-opacity duration-500 z-10 relative" />

                    <!-- YouTube iframe -->
                    <iframe id="main-video"
                        class="w-full h-full object-cover opacity-0 transition-opacity duration-500 z-30 absolute inset-0"
                        src="" frameborder="0" allow="autoplay; encrypted-media; picture-in-picture" allowfullscreen
                        playsinline>
                    </iframe>

                    <!-- Dark overlay -->
                    <div
                        class="absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors duration-500 z-5 pointer-events-none">
                    </div>


                </div>

                <!-- Content Layer -->
                <div class="absolute inset-0 p-8 flex flex-col justify-between z-10 hide-on-expand pointer-events-none">
                    <div class="flex justify-between items-start pointer-events-auto">
                        <div class="flex items-center gap-2">
                            <span class="text-[10px] font-mono uppercase tracking-widest text-white/70">featured</span>
                        </div>
                    </div>

                    <div class="pointer-events-none">
                        <h1 class="text-4xl md:text-5xl font-medium tracking-tighter text-white mb-2">Field Day '25</h1>
                        <p class="text-sm text-neutral-400 max-w-xs mb-6 font-light leading-relaxed">
                            Manatee Elementary's day out in the sun!
                        </p>

                        <!-- Visual button only, click is handled by container -->
                        <div class="flex items-center gap-3 group/btn pointer-events-auto">
                            <div
                                class="w-14 h-14 rounded-full bg-white text-black flex items-center justify-center transition-transform duration-300 group-hover/btn:scale-110">
                                <i data-lucide="play" class="w-5 h-5 fill-current ml-0.5"></i>
                            </div>
                            <span
                                class="text-sm font-medium text-white group-hover/btn:text-white/80 transition-colors">Watch
                                Film</span>
                        </div>
                    </div>
                </div>

                <div class=" mt-24 flex justify-center gap-8 text-neutral-600 animate-on-scroll delay-300">
                    <i data-lucide="instagram" class="w-5 h-5 hover:text-white transition-colors cursor-pointer"></i>
                    <i data-lucide="twitter" class="w-5 h-5 hover:text-white transition-colors cursor-pointer"></i>
                </div>


        </section>

        <!-- Slide 2: The Archive -->
<section id="slide-2" class="snap-start shrink-0 w-full h-screen relative bg-neutral-950 flex flex-col disabled" data-index="1">

            <div class="sticky top-0 z-40 bg-neutral-950/80 backdrop-blur-xl border-b border-white/5
     px-6 md:px-12 py-4 pt-24 md:pt-24
     flex flex-row items-center justify-between gap-4">
                <h2 class="text-xl font-medium text-white tracking-tight">Films</h2>
                <div id="filter-wrapper" class="relative flex items-center gap-1 overflow-x-auto no-scrollbar">

                    <!-- Sliding indicator -->
                    <div id="filter-indicator"></div>

                    <!-- Buttons -->
                    <button
                        class="filter-tab active px-4 py-1.5 rounded-full text-xs font-medium text-neutral-400 hover:text-white transition-colors"
                        onclick="filterGrid('all', this)">All</button>

                    <button
                        class="filter-tab px-4 py-1.5 rounded-full text-xs font-medium text-neutral-400 hover:text-white transition-colors"
                        onclick="filterGrid('latest', this)">Latest</button>

                    <button
                        class="filter-tab px-4 py-1.5 rounded-full text-xs font-medium text-neutral-400 hover:text-white transition-colors"
                        onclick="filterGrid('essentials', this)">Essentials</button>

                </div>

            </div>

            <div class="flex-1 overflow-y-auto px-6 md:px-12 py-8 grid-scroll">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-2 gap-y-2"
                    id="video-grid"></div>
                <div class="py-24 flex justify-center text-neutral-600">
                    <i data-lucide="loader" class="w-5 h-5 animate-spin-slow"></i>
                </div>
            </div>
        </section>
    </main>

    <script>
        lucide.createIcons();

        /* ---------------------------------------
           1. REAL VIDEO DATA
        ---------------------------------------- */
        const videos = [
            { title: "Heritage Day '26", year: "2025", thumbnail: "images/thumb/heritage26.webp", youtubeId: "VPXtw-GZWbE" },
            { title: "Trunk or Treat '26", year: "2025", thumbnail: "images/thumb/trunk26.webp", youtubeId: "IWL6uJBPT4s" },
            { title: "Camila", year: "2025", thumbnail: "images/thumb/camila.webp", youtubeId: "ze_ysiWAZHc" },
            { title: "Heroes Walk", year: "2025", thumbnail: "images/thumb/heroes.webp", youtubeId: "PBqokzEvDc0" },
            { title: "Rating our First Day '26", year: "2025", thumbnail: "images/thumb/firstday26.webp", youtubeId: "r12z4qQ7Ovk" },
            { title: "Meet the Teacher '26", year: "2025", thumbnail: "images/thumb/meetteacher26.webp", youtubeId: "pTXPXnkBCdg" },
            { title: "Buddy Banners", year: "2025", thumbnail: "images/thumb/budbanners2.webp", youtubeId: "N-gK2kr_Uvg" },
            { title: "Leadership Day '25", year: "2025", thumbnail: "images/thumb/leadership25.webp", youtubeId: "tGLHguf7Xzw" },
            { title: "Family Picnic '25", year: "2025", thumbnail: "images/thumb/fampic25.webp", youtubeId: "MQ6y430HpaI" },
            { title: "Field Day '25", year: "2025", thumbnail: "images/thumb/field25.webp", youtubeId: "mT77HGdVI2Y" },
            { title: "Friendship Bracelets", year: "2025", thumbnail: "images/thumb/bracelets.webp", youtubeId: "vu6PTSjqj3k" },
            { title: "Hurricanes Volleyball '25", year: "2024", thumbnail: "images/thumb/hurricanes.webp", youtubeId: "yeZkcxd3Nr8" },
            { title: "Trunk or Treat '25", year: "2024", thumbnail: "images/thumb/trunk25.webp", youtubeId: "xhU3j1VueGc" },
            { title: "Marley-Palooza", year: "2024", thumbnail: "images/thumb/palooza.webp", youtubeId: "9cy2ae1UL4o" },
            { title: "Hispanic Heritage Month '25", year: "2024", thumbnail: "images/thumb/hispanic.webp", youtubeId: "ZGkC4-htSqM" },
            { title: "Rating Our First Day '25", year: "2024", thumbnail: "images/thumb/firstday.webp", youtubeId: "ye3UjIz9jxY" },
            { title: "Make Us Proud", year: "2024", thumbnail: "images/thumb/proud.webp", youtubeId: "IAfNfhlod5Y" },
            { title: "Yearbooks", year: "2024", thumbnail: "images/thumb/yearbooks.webp", youtubeId: "npAAAWfkdzs" },
            { title: "Lighthouse Celebration", year: "2024", thumbnail: "images/thumb/lighthouse.webp", youtubeId: "W2AyRdgaVG8" },
            { title: "Thank You, Ms. Papworth.", year: "2024", thumbnail: "images/thumb/papworth.webp", youtubeId: "rXlTcxSXH4k" },
            { title: "Family Picnic '24", year: "2024", thumbnail: "images/thumb/fampic24.webp", youtubeId: "YE1GqrZ4YsA" },
            { title: "Field Day '24", year: "2024", thumbnail: "images/thumb/field24.webp", youtubeId: "56LniJRap90" },
            { title: "Walkathon", year: "2023", thumbnail: "images/thumb/walkathon.webp", youtubeId: "5aTqg0Cn0bM" },
            { title: "Trunk or Treat '24", year: "2023", thumbnail: "images/thumb/trunk24.webp", youtubeId: "Rrjpt12fQYI" },
            { title: "Araceli & Brett", year: "2023", thumbnail: "images/thumb/aracelybrett.webp", youtubeId: "cKci-BdFoKo" },
            { title: "Jackie's XV", year: "2023", thumbnail: "images/thumb/jackie.webp", youtubeId: "CwHzBi4DV7M" },
            { title: "This is MES", year: "2023", thumbnail: "images/thumb/mes.webp", youtubeId: "sbD0hp_ZSJs" },
            { title: "Field Day '23", year: "2023", thumbnail: "images/thumb/field23.webp", youtubeId: "VtP1P_Bu1tU" },
            { title: "Family Picnic '23", year: "2023", thumbnail: "images/thumb/fampic23.webp", youtubeId: "qMbTH5UfQWE" },
            { title: "Student Leaders", year: "2022", thumbnail: "images/thumb/studlead.webp", youtubeId: "hRF-zRr2mXA" },
            { title: "Blue Zone Celebration", year: "2022", thumbnail: "images/thumb/bluecel.webp", youtubeId: "_BKLjwGGky4" },
            { title: "What is Blue Zone?", year: "2022", thumbnail: "images/thumb/whatblue.webp", youtubeId: "kf4qxxGVlnc" },
            { title: "Homerun Celebration", year: "2022", thumbnail: "images/thumb/homerun.webp", youtubeId: "jFQUsTIB--I" },
            { title: "Identity Crisis", year: "2022", thumbnail: "images/thumb/crisis.webp", youtubeId: "MwMFABhzNxk" },
            { title: "Manatee A-ssembly", year: "2022", thumbnail: "images/thumb/assembly.webp", youtubeId: "A-6e53W0LJw" },
            { title: "Crystal & Marco", year: "2022", thumbnail: "images/thumb/crystalmarc.webp", youtubeId: "MSR59bpwfJQ" },
            { title: "Field Day '22", year: "2022", thumbnail: "images/thumb/field22.webp", youtubeId: "tLcdKXZBzVI" }
        ];

        // Essentials (your order)
        const essentials = [
            "Field Day '25",
            "Yearbooks",
            "Field Day '24",
            "Araceli & Brett",
            "Trunk or Treat '25",
            "Lighthouse Celebration",
            "Family Picnic '24",
            "Rating our First Day '26"
        ].map(t => videos.find(v => v.title === t));

        const filterIndicator = document.getElementById("filter-indicator");

        function moveIndicatorTo(btn) {
            const indicator = document.getElementById("filter-indicator");
            const wrapper = document.getElementById("filter-wrapper");

            if (!indicator || !wrapper) return;

            const rect = btn.getBoundingClientRect();
            const wrapperRect = wrapper.getBoundingClientRect();

            indicator.style.width = rect.width + "px";
            indicator.style.transform = `translateX(${rect.left - wrapperRect.left}px)`;
        }



        /* ---------------------------------------
           2. GRID RENDERER
        ---------------------------------------- */
        const gridContainer = document.getElementById("video-grid");

        function renderGrid(list) {
            gridContainer.innerHTML = "";

            list.forEach(v => {
                const div = document.createElement("div");
                div.className = "group cursor-pointer flex flex-col";

                div.innerHTML = `
    <div class="relative aspect-video bg-neutral-900 overflow-hidden transition-all duration-300">

        <!-- Thumbnail -->
        <img src="${v.thumbnail}"
            class="w-full h-full object-cover opacity-100 group-hover:opacity-50 group-hover:scale-105 transition-all duration-700 ease-out">

    <!-- Hover Play Icon -->
    <div class="absolute inset-0 flex items-center justify-center 
                opacity-0 blur-md scale-95
                group-hover:opacity-100 group-hover:blur-0 group-hover:scale-100
                transition-all duration-300 ease-out">

    <div class="w-12 h-12 rounded-full bg-white/30 backdrop-blur flex items-center justify-center">
        <i data-lucide="play" class="w-4 h-4 text-white fill-white"></i>
    </div>

</div>



        <!-- Bottom-left Title -->
        <div class="absolute bottom-3 left-3 text-white text-sm font-medium drop-shadow-lg">
            ${v.title}
        </div>

        <!-- Bottom-right Year -->
        <div class="absolute bottom-2 right-2 text-neutral-300 text-xs font-mono drop-shadow-lg">
            ${v.year}
        </div>

    </div>
`;


                div.onclick = () => expandPlayerWithVideo(v);

                gridContainer.appendChild(div);
                lucide.createIcons();
            });
        }

        /* ---------------------------------------
           3. FILTERS
        ---------------------------------------- */
        function filterGrid(type, btn) {
            moveIndicatorTo(btn);

            document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
            btn.classList.add('active');

            // üî• scroll to top of archive list
            document.querySelector('#slide-2 .grid-scroll').scrollTo({
                top: 0,
                behavior: 'smooth'
            });

            // fade out
            gridContainer.classList.remove("grid-fade-in");
            gridContainer.classList.add("grid-fade-out");

            setTimeout(() => {
                let list;

                if (type === "all") {
                    list = [...videos].sort((a, b) => a.title.localeCompare(b.title));
                } else if (type === "latest") {
                    list = [...videos];
                } else if (type === "essentials") {
                    list = essentials;
                } else if (type === "year") {
                    list = [...videos].sort((a, b) => b.year.localeCompare(a.year));
                }

                renderGrid(list);

                // fade back in
                requestAnimationFrame(() => {
                    gridContainer.classList.remove("grid-fade-out");
                    gridContainer.classList.add("grid-fade-in");
                });

            }, 250);
        }



        /* ---------------------------------------
           4. EXPANDING THE PLAYER
        ---------------------------------------- */
        const slide1 = document.getElementById('slide-1');
        const stageContainer = document.getElementById('stage-container');
        const playerControls = document.getElementById('player-controls');
        const recDot = document.getElementById('rec-dot');
        const statusText = document.getElementById('status-text');
        const playerTitle = document.getElementById('player-title');
        const mainIframe = document.getElementById('main-video');
        const mainThumb = document.getElementById('main-thumbnail');

        function expandPlayer() {
            if (stageContainer.classList.contains('expanded')) return;

            slide1.classList.add('video-mode');
            stageContainer.classList.add('expanded');

            mainIframe.style.opacity = "1";
            mainThumb.style.opacity = "0";

            if (playerControls) {
                playerControls.classList.remove('opacity-0');
                playerControls.style.pointerEvents = 'auto';
            }

            recDot.classList.remove('bg-white');
            recDot.classList.add('bg-red-500');
            statusText.innerText = "PLAYING";
        }

        function expandPlayerWithVideo(video) {
            document.getElementById('slide-1').scrollIntoView({ behavior: 'smooth' });

            // Only update the title if it exists
            if (playerTitle) playerTitle.innerText = video.title;

            mainThumb.src = video.thumbnail;

            mainIframe.src =
                `https://www.youtube.com/embed/${video.youtubeId}?controls=1&modestbranding=1&rel=0&playsinline=1&enablejsapi=1`;

            setTimeout(() => expandPlayer(), 400);
        }

        function closeVideo(e) {
            if (e) e.stopPropagation();

            slide1.classList.remove('video-mode');
            stageContainer.classList.remove('expanded');

            mainIframe.style.opacity = "0";
            mainThumb.style.opacity = "1";

            const url = mainIframe.src;
            mainIframe.src = url;

            if (playerControls) {
                playerControls.classList.add('opacity-0');
                playerControls.style.pointerEvents = 'none';
            }

            recDot.classList.remove('bg-red-500');
            recDot.classList.add('bg-white');
            statusText.innerText = "astn";
        }


        /* ---------------------------------------
           5. MUTE + FULLSCREEN
        ---------------------------------------- */
        function toggleMute(e) {
            e.stopPropagation();
            mainIframe.contentWindow.postMessage('{"event":"command","func":"mute"}', "*");
        }

        function toggleFullscreen(e) {
            e.stopPropagation();
            stageContainer.requestFullscreen();
        }

        /* ---------------------------------------
           6. DOT FUNCTION
        ---------------------------------------- */

        function handleScroll() {
            const scroll = document.getElementById("main-scroll");
            const dots = document.querySelectorAll(".nav-dot");
            const slides = document.querySelectorAll("section");

            let index = 0;

            slides.forEach((slide, i) => {
                const rect = slide.getBoundingClientRect();
                const midpoint = rect.top + rect.height / 2;

                if (midpoint > 0 && midpoint < window.innerHeight) {
                    index = i;
                }
            });

            dots.forEach((dot, i) => {
                if (i === index) {
                    dot.classList.add("bg-white", "scale-125");
                    dot.classList.remove("bg-white/20");
                } else {
                    dot.classList.remove("bg-white", "scale-125");
                    dot.classList.add("bg-white/20");
                }
            });
        }

        /* --- Scroll Observer (add this back) --- */
        const observerOptions = { threshold: 0.3 };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const animatable = entry.target.querySelectorAll('.animate-on-scroll');
                    animatable.forEach(el => el.classList.add('animate'));

                    updateNavDots(entry.target.getAttribute('data-index'));
                }
            });
        }, observerOptions);

        document.querySelectorAll('section').forEach(section => observer.observe(section));


        /* ---------------------------------------
           7. ON LOAD
        ---------------------------------------- */
        document.addEventListener("DOMContentLoaded", () => {
            // default video
            mainIframe.src =
                `https://www.youtube.com/embed/mT77HGdVI2Y?controls=1&modestbranding=1&rel=0&showinfo=0&iv_load_policy=3&playsinline=1&enablejsapi=1`;



            // load grid default
            filterGrid("all", document.querySelector('.filter-tab.active'));

            // move indicator to the "All" tab
            const firstTab = document.querySelector(".filter-tab.active");
            moveIndicatorTo(firstTab);
        });

        /* MOBILE ‚Äî enable Slide 2 only when scrolled */
        function activateSlide2() {
            const slide2 = document.getElementById("slide-2");

            if (window.innerWidth > 1266) return; // desktop untouched

            const rect = slide2.getBoundingClientRect();

            // if top passes 80px from top, it's considered "entered"
            if (rect.top < 80) {
                slide2.classList.remove("disabled");
                slide2.classList.add("enabled");
            } else {
                slide2.classList.add("disabled");
                slide2.classList.remove("enabled");
            }
        }

        document.getElementById("main-scroll").addEventListener("scroll", activateSlide2);
        document.addEventListener("DOMContentLoaded", activateSlide2);



    </script>


</body>

</html>